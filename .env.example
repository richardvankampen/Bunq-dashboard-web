# ============================================
# BUNQ DASHBOARD - SESSION-BASED AUTH
# Environment Configuration v3.0
# ============================================

# ============================================
# SECURITY CREDENTIALS (VERPLICHT!)
# ============================================

# Login Credentials
# BELANGRIJK: Kies een STERK wachtwoord!
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=KiesEenSterkWachtwoord


# Flask Secret Key (voor session encryption)
# Genereer een random key met: python -c "import secrets; print(secrets.token_hex(32))"
# KRITIEK: Deze key moet GEHEIM blijven en uniek zijn!
# Als je deze wijzigt, worden alle bestaande sessies ongeldig.
FLASK_SECRET_KEY=genereer_een_random_key_hier_64_characters_lang

# CORS (aanbevolen)
ALLOWED_ORIGINS=http://192.168.1.100:5000 # IP van NAS invullen
SESSION_COOKIE_SECURE=false

# ============================================
# VAULTWARDEN CONFIGURATION
# ============================================

# Vaultwarden URL (binnen Docker network)
VAULTWARDEN_URL=http://vaultwarden:80

# Vaultwarden API Credentials
# Verkrijg deze via: Vaultwarden Web UI → Account Settings → Security → API Key
VAULTWARDEN_CLIENT_ID=user.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
VAULTWARDEN_CLIENT_SECRET=jouw_vaultwarden_client_secret_hier

# Naam van het vault item waar je Bunq API key staat
VAULTWARDEN_ITEM_NAME=Bunq API Key

# Enable Vaultwarden (true) of gebruik BUNQ_API_KEY direct (false)
USE_VAULTWARDEN=true

# ============================================
# BUNQ API CONFIGURATION
# ============================================

# Bunq Environment (SANDBOX of PRODUCTION)
BUNQ_ENVIRONMENT=PRODUCTION

# Alleen gebruiken als USE_VAULTWARDEN=false
# Anders laat dit leeg - de key komt dan uit Vaultwarden
BUNQ_API_KEY=

# ============================================
# CORS CONFIGURATION
# ============================================

# Toegestane origins voor CORS (komma-gescheiden)
# Vervang met je NAS IP-adres!
# Voorbeelden:
#   - Lokaal: http://localhost:5000
#   - NAS LAN: http://192.168.1.100:5000
#   - Meerdere: http://192.168.1.100:5000,https://bunq.jouw-domein.nl
ALLOWED_ORIGINS=http://localhost:5000

# ============================================
# FLASK CONFIGURATION
# ============================================

# Flask host (0.0.0.0 = luister op alle interfaces)
FLASK_HOST=0.0.0.0

# Flask port
FLASK_PORT=5000

# Flask debug mode (ALTIJD false in productie!)
FLASK_DEBUG=false

# ============================================
# LOGGING
# ============================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================
# PERFORMANCE / CACHE
# ============================================

# Enable in-memory caching for API responses
CACHE_ENABLED=true

# Cache TTL in seconds
CACHE_TTL_SECONDS=60

# Pagination defaults
DEFAULT_PAGE_SIZE=500
MAX_PAGE_SIZE=2000

# Max days allowed for requests (safety cap)
MAX_DAYS=3650

# ============================================
# SESSION CONFIGURATION
# ============================================

# Session lifetime (in hours)
# Default: 24 hours - hardcoded in api_proxy_session.py
# Gebruikers moeten elke 24 uur opnieuw inloggen

# Session cookie name
# Default: session - Flask default

# ============================================
# DEPLOYMENT NOTES
# ============================================

# INSTALLATIE STAPPEN:
# ====================
#
# 1. Kopieer dit bestand naar .env:
#    cp .env.example .env
#
# 2. Genereer Flask secret key:
#    python3 -c "import secrets; print(secrets.token_hex(32))"
#    Kopieer output naar FLASK_SECRET_KEY
#
# 3. Vul BASIC_AUTH_PASSWORD in met een sterk wachtwoord
#
# 4. Configureer Vaultwarden credentials (CLIENT_ID en CLIENT_SECRET)
#
# 5. Update ALLOWED_ORIGINS met je NAS IP-adres
#
# 6. Als je HTTPS gebruikt (aanbevolen!):
#    SESSION_COOKIE_SECURE=true
#
# 7. Start containers:
#    docker-compose down
#    docker-compose build --no-cache
#    docker-compose up -d
#
# SECURITY CHECKLIST:
# ===================
# ✅ Sterk BASIC_AUTH_PASSWORD ingesteld
# ✅ Unieke FLASK_SECRET_KEY gegenereerd
# ✅ ALLOWED_ORIGINS beperkt tot je NAS/domein
# ✅ FLASK_DEBUG=false in productie
# ✅ Bunq API key in Vaultwarden (niet in .env)
# ✅ SESSION_COOKIE_SECURE=true (als HTTPS)
# ✅ Firewall regels actief
# ✅ Alleen toegang via VPN

# SESSIE BEVEILIGING:
# ===================
# • Credentials worden NOOIT in localStorage opgeslagen
# • Session cookies zijn HttpOnly (niet toegankelijk via JavaScript)
# • Session cookies zijn SameSite=Lax (CSRF bescherming)
# • Sessions verlopen na 24 uur
# • Rate limiting: 5 login pogingen per minuut
# • Logout vernietigt sessie onmiddellijk

# VOOR HTTPS DEPLOYMENT:
# =======================
# 1. Verkrijg SSL certificaat (Let's Encrypt via Synology)
# 2. Configureer reverse proxy met HTTPS
# 3. Set SESSION_COOKIE_SECURE=true
# 4. Update ALLOWED_ORIGINS met https:// URLs

# TROUBLESHOOTING:
# ================
# 
# "Session expired" na container restart?
# → FLASK_SECRET_KEY niet ingesteld - genereer er één!
#
# "CORS error"?
# → Check ALLOWED_ORIGINS bevat je frontend URL
#
# "Login failed"?
# → Controleer BASIC_AUTH_USERNAME en PASSWORD
#
# "Rate limit exceeded"?
# → Wacht 60 seconden, of herstart container
