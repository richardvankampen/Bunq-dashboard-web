# Bunq Dashboard (.env) — non‑secret settings only
# Secrets are provided via Docker Swarm:
# - bunq_basic_auth_password
# - bunq_flask_secret_key
# - bunq_vaultwarden_client_id
# - bunq_vaultwarden_client_secret
# - bunq_vaultwarden_master_password
# - bunq_api_key (only if USE_VAULTWARDEN=false)
# Preferred flow: USE_VAULTWARDEN=true (recommended and default)

# Auth (username only)
BASIC_AUTH_USERNAME=admin

# Vaultwarden
# Use http://vaultwarden:80 if on bunq-net, or http://<NAS-IP>:9000 via host/IP
VAULTWARDEN_URL=http://vaultwarden:80
# Preferred: cli (decrypts vault item values correctly)
VAULTWARDEN_ACCESS_METHOD=cli
VAULTWARDEN_ITEM_NAME="Bunq API Key"
USE_VAULTWARDEN=true

# Optional: Vaultwarden device metadata (auto-generated if not set)
# VAULTWARDEN_DEVICE_IDENTIFIER=uuid-string
# VAULTWARDEN_DEVICE_NAME="Bunq Dashboard"
# VAULTWARDEN_DEVICE_TYPE=22

# Bunq
BUNQ_ENVIRONMENT=PRODUCTION
# Auto-update Bunq API allowlist on startup/reinit
AUTO_SET_BUNQ_WHITELIST_IP=true
AUTO_SET_BUNQ_WHITELIST_DEACTIVATE_OTHERS=false
# Optional: force one specific credential-password-ip profile id
# BUNQ_CREDENTIAL_PASSWORD_IP_ID=12345

# CORS / Cookies
# Use the exact URL you open in your browser (prefer HTTPS/reverse proxy):
ALLOWED_ORIGINS=https://bunq.jouwdomein.nl
# Local HTTP fallback (only if you do not use HTTPS):
# ALLOWED_ORIGINS=http://192.168.1.100:5000
SESSION_COOKIE_SECURE=true  # set false only for local HTTP

# App
LOG_LEVEL=INFO
FLASK_DEBUG=false
BUNQ_INIT_AUTO_ATTEMPT=true
BUNQ_INIT_RETRY_SECONDS=120

# Cache / performance
CACHE_ENABLED=true
CACHE_TTL_SECONDS=60
DEFAULT_PAGE_SIZE=500
MAX_PAGE_SIZE=2000
MAX_DAYS=3650

# Historical data store (P1)
# Keeps local snapshots/transactions in SQLite for longer-term insights.
DATA_DB_ENABLED=true
DATA_DB_PATH=config/dashboard_data.db

# FX conversion (for non-EUR accounts -> EUR totals)
FX_ENABLED=true
FX_RATE_SOURCE=frankfurter
FX_REQUEST_TIMEOUT_SECONDS=8
FX_CACHE_HOURS=24

# Gunicorn runtime (production)
GUNICORN_WORKERS=2
GUNICORN_THREADS=4
GUNICORN_TIMEOUT=120
GUNICORN_KEEPALIVE=5
GUNICORN_MAX_REQUESTS=1200
GUNICORN_MAX_REQUESTS_JITTER=120
GUNICORN_LOG_LEVEL=info
BUNQ_PREBOOT_INIT=true
